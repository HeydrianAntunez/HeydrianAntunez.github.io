{
  "hash": "42227c18bdbfb08b5be223ec28e4b546",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Zonas de conexión gratuita en la Ciudad de México\"\nformat: html\neditor: visual\n---\n\n```{=html}\n<div class=\"description\">\n        <p>El siguiente código muestra la distribución de los 35,350 puntos de servicio de wifi en la Ciudad de México, los cuales los podemos encontrar en zonas como: el Aeropuerto, colonias periféricas, escuelas públicas, centros de salud, postes de calles, Pilares, postes del C5, sitios públicos, transporte público, unidades habitacionales y Utopías.\n      </p>\n```\n\n```{=html}\n<div class=\"description\">\nLas librerías que usaremos serán las siguientes:\n      </p>\n```\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readxl)\nlibrary(tidyr)\nlibrary(hexbin)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(sf)\nlibrary(patchwork)\n```\n:::\n\n\n\n::: {.cell}\n\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nalcaldias_CDMX <- st_read(\"Data/Wifi Acceso/Alcaldías/poligonos_alcaldias_cdmx.shp\")\nwifi<-read_excel(\"Data/Wifi Acceso/00-2025-wifi_gratuito_en_cdmx.xlsx\")\n```\n:::\n\n\n::: description\nPara poder utilizar el archivo xlsx es necesario limpiar los datos geográficos y convertirlo a un archivo sph, lo que noa ayudará para le mapeado.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwifi_limpio <- wifi %>%\n  drop_na(longitud, latitud)\nwifi_sf<-st_as_sf(wifi_limpio, \n                  coords = c(\"longitud\", \"latitud\"),\n                  crs=4326)\n```\n:::\n\n:::\n\nCon estos datos ya podemos graficar la zona de la Ciudad de México.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() +\n  # 1. CAPA BASE: Alcadías de la CDMX\n  geom_sf(data = alcaldias_CDMX, \n          fill = \"#212121\",        # Color gris oscuro profundo para el fondo \n          color = \"#BDBDBD\",       # Borde gris claro sutil\n          linewidth = 0.3) +       # Línea delgada\n  \n  # 2. PUNTOS WIFI: Se destacan sutilmente\n  geom_sf(data = wifi_sf, \n          color = \"#FFFFFF\",       # Blanco puro para visibilidad\n          size = 0.05,              # Puntos un poco más grandes para presencia\n          alpha = 0.8) +           # Menos transparente para mayor impacto\n  \n  # 3. LÍMITE Y SISTEMA DE COORDENADAS (Importante mantener 4326/WGS84 para geografía)\n  coord_sf(crs = 4326) +\n  # 4. ETIQUETAS INFORMATIVAS \n  labs(\n    title = \"Puntos de Acceso WiFi Gratuitos\",\n    subtitle = \"Distribución por Alcaldía en la Ciudad de México\",\n    caption = \"Fuente: [Datos Abiertos Agencia Digital de Innovación Pública (ADIP)]. \\nFecha: 1/09/2025\"\n  ) +\n  \n  # 5. TEMA Y ESTILOS (El corazón del diseño profesional)\n  theme_void() + \n  theme(\n    # FONDOS: Contraste con el mapa\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA), # Fondo general más oscuro\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA), # Fondo del panel (generalmente cubierto por geom_sf)\n    \n    # TEXTO: Títulos centrados, claros y estilizados\n    plot.title = element_text(\n      color = \"#FFFFFF\", \n      size = 12, \n      face = \"bold\",\n      hjust = 0.5,           # Centrado\n      margin = margin(t = 15)\n    ),\n    plot.subtitle = element_text(\n      color = \"#BDBDBD\", \n      size = 8, \n      hjust = 0.5,\n      margin = margin(b = 10)\n    ),\n    plot.caption = element_text(\n      color = \"#5E5E5E\", \n      size = 6, \n      hjust = 1,             # Alineado a la derecha\n      margin = margin(b = 5, r = 5)\n    ),\n    \n    # MARGENES (espacio alrededor del gráfico)\n    plot.margin = margin(10, 10, 10, 10)\n  )\n```\n\n::: {.cell-output-display}\n![](Acceso-Wifi_files/figure-html/mapa-wifi-1.png){width=2560}\n:::\n:::\n\n\n¿Cuáles son las alcaldías con mayores y menores puntos de acceso? Creamos unas tablas que nos muestren los top 5 alcaldías con mayores y menos puntos de acceso.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntabla_top5_mayor<-wifi_limpio%>%\n  group_by(alcaldia)%>%\n  summarise(Total_Puntos_Wifi= n())%>%\n  arrange(desc(Total_Puntos_Wifi))%>%\n  slice_head(n=5)\ntabla_top5_mayor\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n  alcaldia          Total_Puntos_Wifi\n  <chr>                         <int>\n1 Iztapalapa                     4988\n2 Cuauhtemoc                     4021\n3 Gustavo A. Madero              3651\n4 Tlalpan                        3124\n5 Coyoacan                       2800\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntabla_top5_menor<-wifi_limpio%>%\n  group_by(alcaldia)%>%\n  filter(alcaldia!=\"IZTAPALAPA\")%>%\n  summarise(Total_Puntos_Wifi= n())%>%\n  arrange(Total_Puntos_Wifi)%>%\n  slice_head(n=5)\ntabla_top5_menor\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 2\n  alcaldia              Total_Puntos_Wifi\n  <chr>                             <int>\n1 Milpa Alta                          349\n2 Cuajimalpa de Morelos               737\n3 Magdalena Contreras                 797\n4 Xochimilco                          920\n5 Tlahuac                             990\n```\n\n\n:::\n:::\n\n\nCreamos gráfiacs de columnas para cada una de las tablas y las guardamos.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngráfica_top_mayor<-ggplot(tabla_top5_mayor, aes(x= reorder(alcaldia,-Total_Puntos_Wifi), y= Total_Puntos_Wifi))+\n  geom_col(fill = \"#00BFFF\", # Color turquesa brillante (alto contraste con el fondo oscuro)\n           width = 0.7) +\n  geom_text(aes(label = Total_Puntos_Wifi), \n            vjust = -0.5, # Ajuste vertical para colocar la etiqueta justo arriba de la barra\n            color = \"#FFFFFF\", # Texto blanco brillante\n            size = 5,\n            # family = \"roboto\", # Descomentar si usaste showtext\n            fontface = \"bold\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) + # Asegura espacio para las etiquetas\n  labs(\n    title = \"Top 5 Alcaldías\",\n    x = NULL, # Quitamos la etiqueta del eje X (ya se entiende que son Alcaldías)\n    y = \"Total de Puntos WiFi\"\n  ) +\n  theme_minimal() + # Un buen punto de partida para gráficos de barras\n  theme(\n    # FONDOS\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.grid.major.x = element_blank(), # Quitamos las líneas verticales (no son necesarias)\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"#333333\"), # Líneas horizontales sutiles\n    \n    # TEXTO DE EJES Y ETIQUETAS\n    axis.text.x = element_text(color = \"#FFFFFF\", size = 12, angle = 45, hjust = 1), # Gira las etiquetas X\n    axis.text.y = element_text(color = \"#FFFFFF\", size = 12),\n    axis.title.y = element_text(color = \"#BDBDBD\", size = 12, margin = margin(r = 15)),\n    \n    # TÍTULOS\n    plot.title = element_text(color = \"#FFFFFF\", size = 20, face = \"bold\", hjust = 0.5, margin = margin(t = 15)),\n    plot.subtitle = element_text(color = \"#BDBDBD\", size = 14, hjust = 0.5, margin = margin(b = 20)),\n    plot.caption = element_text(color = \"#5E5E5E\", size = 8, hjust = 1, margin = margin(b = 5, r = 5)),\n    \n    plot.margin = margin(10, 10, 10, 10)\n  )\n\ngráfica_top_menor<-ggplot(tabla_top5_menor, aes(x= reorder(alcaldia,-Total_Puntos_Wifi), y= Total_Puntos_Wifi))+\n  geom_col(fill = \"#00BFFF\", # Color turquesa brillante (alto contraste con el fondo oscuro)\n           width = 0.7) +\n  geom_text(aes(label = Total_Puntos_Wifi), \n            vjust = -0.5, # Ajuste vertical para colocar la etiqueta justo arriba de la barra\n            color = \"#FFFFFF\", # Texto blanco brillante\n            size = 5,\n            # family = \"roboto\", # Descomentar si usaste showtext\n            fontface = \"bold\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) + # Asegura espacio para las etiquetas\n  labs(\n    title = \"Top 5 Alcaldías\",\n    x = NULL, # Quitamos la etiqueta del eje X (ya se entiende que son Alcaldías)\n    y = \"Total de Puntos WiFi\"\n  ) +\n  theme_minimal() + # Un buen punto de partida para gráficos de barras\n  theme(\n    # FONDOS\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.grid.major.x = element_blank(), # Quitamos las líneas verticales (no son necesarias)\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"#333333\"), # Líneas horizontales sutiles\n    \n    # TEXTO DE EJES Y ETIQUETAS\n    axis.text.x = element_text(color = \"#FFFFFF\", size = 12, angle = 45, hjust = 1), # Gira las etiquetas X\n    axis.text.y = element_text(color = \"#FFFFFF\", size = 12),\n    axis.title.y = element_text(color = \"#BDBDBD\", size = 12, margin = margin(r = 15)),\n    \n    # TÍTULOS\n    plot.title = element_text(color = \"#FFFFFF\", size = 20, face = \"bold\", hjust = 0.5, margin = margin(t = 15)),\n    plot.subtitle = element_text(color = \"#BDBDBD\", size = 14, hjust = 0.5, margin = margin(b = 20)),\n    plot.caption = element_text(color = \"#5E5E5E\", size = 8, hjust = 1, margin = margin(b = 5, r = 5)),\n    \n    plot.margin = margin(10, 10, 10, 10)\n  )\n```\n:::\n\n\nPresentamos las dos tablas en un dashboard que nos permita compararlas y entender mejor la distribución de los puntos wifi.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngráfica_top_mayor|gráfica_top_menor\n```\n\n::: {.cell-output-display}\n![](Acceso-Wifi_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### Conclusión\n\nExplorar la base de datos de la Agencia Digital de Innovación Pública nos permite observar algo crucial: la falta de instalalaciones para estos servicios públicos en las zonas sur de la ciudad. Cabe preguntarse por qué en Milpa Alta apenas y existen 349 puntos de acceso, siendo que en las cinco alcaldías con mayores puntos la cifra supera los 2800.\n\nFuente: <https://datos.cdmx.gob.mx/dataset/puntos-de-acceso-wifi-en-la-cdmx>\n",
    "supporting": [
      "Acceso-Wifi_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}