1 + 1
#| echo: false
2 * 2
library(hexbin)
library(ggplot2)
library(dplyr)
library(sf)
library(hexbin)
library(ggplot2)
library(dplyr)
library(sf)
library(hexbin)
library(ggplot2)
library(dplyr)
library(sf)
data <- read.table("https://github.com/holtzy/data_to_viz/raw/master/Example_dataset/19_MapConnection.csv", header=T, sep=",")
library(ggplot2)
View(data)
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",
destfile = "IMG/BlackMarble_2016_01deg.jpg", mode = "wb")
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",
destfile = "IMG/BlackMarble_2016_01deg.jpg", mode = "wb")
earth <- readJPEG("IMG/BlackMarble_2016_01deg.jpg", native = TRUE)
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",destfile = "IMG/BlackMarble_2016_01deg.jpg", mode = "wb")
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",destfile = "IMG/BlackMarble_2016_01deg.jpg", mode = "wb")
dir.create("IMG", showWarnings = FALSE)
download.file("https://raw.githubusercontent.com/holtzy/data_to_viz/master/story/IMG/BlackMarble_2016_01deg.jpg",destfile = "IMG/BlackMarble_2016_01deg.jpg", mode = "wb")
earth <- readJPEG("IMG/BlackMarble_2016_01deg.jpg", native = TRUE)
install.packages("jpeg")
library(jpeg)
earth <- readJPEG("IMG/BlackMarble_2016_01deg.jpg", native = TRUE)
earth <- rasterGrob(earth, interpolate = TRUE)
install.packages("rasterGrob")
summary=data %>%
dplyr::count(homelat,homelon,homecontinent, travellat,travellon,travelcontinent) %>%
arrange(n)
library(dplyr)
summary=data %>%
dplyr::count(homelat,homelon,homecontinent, travellat,travellon,travelcontinent) %>%
arrange(n)
summary
data_for_connection=function( dep_lon, dep_lat, arr_lon, arr_lat, group){
inter <- gcIntermediate(c(dep_lon, dep_lat), c(arr_lon, arr_lat), n=50, addStartEnd=TRUE, breakAtDateLine=F)
inter=data.frame(inter)
inter$group=NA
diff_of_lon=abs(dep_lon) + abs(arr_lon)
if(diff_of_lon > 180){
inter$group[ which(inter$lon>=0)]=paste(group, "A",sep="")
inter$group[ which(inter$lon<0)]=paste(group, "B",sep="")
}else{
inter$group=group
}
return(inter)
}
data_for_connection
