[
  {
    "objectID": "proyectos/Modelo de regresión/Modelo-Regresión.html",
    "href": "proyectos/Modelo de regresión/Modelo-Regresión.html",
    "title": "Modelos de regresión",
    "section": "",
    "text": "Introducción\nEste proyecto muestra cómo aplicar pruebas estadísticas y modelos de regresión para el cálculo y visualización de relaciones entre variables (tanto numérica como categóricas).\nSe trabajará con datos pública de la base del INEGI, por lo que se puede optar poder descargar el archivo desde el repositorio Github o desde la página oficial de microdatos del INEGI.\nAl final se dará una breve explicación sobre cómo podemos mejorar la calidad de los modelos de regresión.\nPara obtener la base de datos de la ENOE 2025Trimestre 2 pueden acceder al github en\n   \n            este enlace.\n        \nComo primer paso cargamos las librerías.\n\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(survey)\n\nAbrimos la base de datos que usaremos (sustituir ruta).\n\nEnoe_2025_T2&lt;-read.csv(\"C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_2025_2t.csv\")\n\nCreamos nuestro diseño muestral.\n\ndiseno&lt;-svydesign(id=~upm, strata=~est, data=Enoe_2025_T2, \n                  weights=~fac_tri)\n\nNota: Revisar el proyecto de Diseño de muestras complejas para entender los efectos de la factorización enla muestra.\n\n#Como primer paso creamos un filtro para analizar sólo aquellas observaciones que tengan un ingreso&gt;0\ndiseño_ingresos_filt&lt;-subset(diseno, ingocup &gt;0) \n\nEl primer modelo de regresión consiste en establecer un relación entre el ingreso (variable continua) en función del sexo (categórica) y la edad (discreta).\n\nmodelo1&lt;-svyglm(ingocup~sex+ eda, design = diseño_ingresos_filt) #Establecemos un regresión lineal ponderada entre ingreso, sexo y edad.\nsummary(modelo1)\n\n\nCall:\nsvyglm(formula = ingocup ~ sex + eda, design = diseño_ingresos_filt)\n\nSurvey design:\nsubset(diseno, ingocup &gt; 0)\n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 13516.324    181.651  74.408   &lt;2e-16 ***\nsex         -2467.636     84.225 -29.298   &lt;2e-16 ***\neda             4.890      3.106   1.575    0.115    \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 76674795)\n\nNumber of Fisher Scoring iterations: 2\n\n\nLos resultados presentan el cambio estimado en el ingreso por cada unidad de cambio en la variable predictora, manteniendo las otras varaibles constantes.\nIntercepto= 13,516: para una persona con edad = 0 que pertenece al grupo base de sex= 1 (hombre).\nsex= -2,467.64:diferencia promedio en el ingreso entre el grupo sex. Indica que el valor para sex=2 (mujeres) tiene 2.467.64 unidades monetarias menos de ingreso que el grupo base.\neda=4.89: Por cada año adicional de edad el ingreso aumenta en 4.89 unidades monetarias, manteniendo constante la varible sex. *Se establecen erroes estándar para el cálculo de los estimadores.\nLo más sobresaliente del modelo son los niveles de significancia. Aunque la variable categórica sex presenta un nivel de significancia importante, ya que es mucho menor a alpha =0.05, la variable discreta eda no es estadísticamente significativa por su alto valor p. Implicaciones: la variable sex, en este modelo, tiene influencia sobre la variable ingreso, por lo que no podemos descartar una dependencia entre variables; caso contrario, la variable edad, aquí, no se presenta como significativa para la relación de dependencia con los ingresos. Un posterior modelo permitirá decidir si la variable edad es necesaria para el análisis de regresión.\nPara continuar con el análisis, cremos otro modelo de regresión que añade ahora la variable educación:\n\nmodelo2&lt;- svyglm(ingocup~sex+ eda+ as.factor(cs_p13_1), design= diseño_ingresos_filt)\nsummary(modelo2)\n\n\nCall:\nsvyglm(formula = ingocup ~ sex + eda + as.factor(cs_p13_1), design = diseño_ingresos_filt)\n\nSurvey design:\nsubset(diseno, ingocup &gt; 0)\n\nCoefficients:\n                       Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)            7098.289    244.412  29.042  &lt; 2e-16 ***\nsex                   -3136.144     78.165 -40.122  &lt; 2e-16 ***\neda                      51.232      3.212  15.951  &lt; 2e-16 ***\nas.factor(cs_p13_1)1   1859.763   1080.139   1.722   0.0851 .  \nas.factor(cs_p13_1)2   2078.408    138.603  14.995  &lt; 2e-16 ***\nas.factor(cs_p13_1)3   3926.907    145.387  27.010  &lt; 2e-16 ***\nas.factor(cs_p13_1)4   5580.124    164.037  34.018  &lt; 2e-16 ***\nas.factor(cs_p13_1)5   6085.946    989.537   6.150 7.88e-10 ***\nas.factor(cs_p13_1)6   5916.587    222.050  26.645  &lt; 2e-16 ***\nas.factor(cs_p13_1)7  10863.844    239.163  45.424  &lt; 2e-16 ***\nas.factor(cs_p13_1)8  18664.603    761.720  24.503  &lt; 2e-16 ***\nas.factor(cs_p13_1)9  21900.029   1330.057  16.465  &lt; 2e-16 ***\nas.factor(cs_p13_1)99  4031.194    646.038   6.240 4.47e-10 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 64366760)\n\nNumber of Fisher Scoring iterations: 2\n\n\nDel modelo se deduce lo siguiente:\nLos estimadores:\nIntercepto 7,098.28 cuando todos los demás valores son 0 (1= hombre para sex).\nSex: diferencia de -3136.14 entre base (hombres) y mujeres cuando todos los demás valores son igual 0.\nEda: incremento de 51.2 unidades monetarias de ingreso por unidad de edad.\nValores P siginicativos para todas las interacciones, excepto, posiblemente, nivel de educación =1 (primaria) con p value= 0.0851.\nConclusión: al integrar la variable ordnial educación en este nuevo modelo cambia la importancia de la variable discreta edad, haciendo que su nivel de significancia permita establecer relaciones de dependencia.\nPara finalizar, creamos un nuevo modelo.\n\nmodelo3&lt;-svyglm(ingocup~sex*eda+as.factor(cs_p13_1), design = diseño_ingresos_filt)\nsummary(modelo3)\n\n\nCall:\nsvyglm(formula = ingocup ~ sex * eda + as.factor(cs_p13_1), design = diseño_ingresos_filt)\n\nSurvey design:\nsubset(diseno, ingocup &gt; 0)\n\nCoefficients:\n                       Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept)            6166.840    349.951  17.622  &lt; 2e-16 ***\nsex                   -2437.710    196.438 -12.410  &lt; 2e-16 ***\neda                      75.008      7.564   9.916  &lt; 2e-16 ***\nas.factor(cs_p13_1)1   1843.711   1070.635   1.722 0.085072 .  \nas.factor(cs_p13_1)2   2065.019    138.978  14.859  &lt; 2e-16 ***\nas.factor(cs_p13_1)3   3912.542    145.723  26.849  &lt; 2e-16 ***\nas.factor(cs_p13_1)4   5552.099    164.392  33.774  &lt; 2e-16 ***\nas.factor(cs_p13_1)5   6157.346    990.258   6.218 5.14e-10 ***\nas.factor(cs_p13_1)6   5935.915    221.930  26.747  &lt; 2e-16 ***\nas.factor(cs_p13_1)7  10828.837    240.030  45.115  &lt; 2e-16 ***\nas.factor(cs_p13_1)8  18638.020    761.263  24.483  &lt; 2e-16 ***\nas.factor(cs_p13_1)9  21875.225   1336.254  16.371  &lt; 2e-16 ***\nas.factor(cs_p13_1)99  4017.297    645.403   6.224 4.93e-10 ***\nsex:eda                 -17.425      4.752  -3.667 0.000247 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n(Dispersion parameter for gaussian family taken to be 64352082)\n\nNumber of Fisher Scoring iterations: 2\n\n\n\n\nConclusiones\nEn este último modelo el cambio más importante es asumir el efecto de la interacción entre sex y eda, y no entre la eda y el ingreso, siendo que el resultado del primer modelo marcó una escaza significancia para asumir la interacción entre estas útlimas variables. Lo que se busca es robustecer el modelo para integrar los resultados de las interacciones más fuertes para tener una mejor representación de las relaciones entre variables. Si se observa, esto arroja un cambio en los estimadores que nos puede proporcionar información más relevante para el análisis de los ingresos en México. Como ejercicio final podemos hacer la representación gráfica de la relación lineal para ilustar cómo el último modelo nos permite visualizar la relación entre las varaibles.\n\nlibrary(ggeffects)\n\n#creamos el gráfico\n  #Elgráfrico muestra la diferencia de ingresos para las diferentes edad agrupadas por sexo, manteniendo la escolaridad constante en 7(licenciatura)\n\nlibrary(scales)\nlibrary(patchwork)\n#Para gente con estudios profesionales\n\n# Se fija la escolaridad (cs_p13_1) en un nivel, por ejemplo, el Nivel 7.\npredicciones_interaccion1 &lt;- ggpredict(\n  model = modelo3, \n  terms = c(\"eda [all]\", \"sex\", \"cs_p13_1 [7]\")\n)\n\ngrafico_interaccion1 &lt;- plot(predicciones_interaccion1) +\n  labs(\n    # Título que resalta la diferencia (hallazgo clave)\n    title = \"Ingresos por Edad y sexo\",\n    # Subtítulo para añadir el contexto de la escolaridad (profesionaliza el gráfico)\n    subtitle = \"Nivel de Escolaridad 7 (Profesional)\",\n    x = \"Edad (años)\",\n    # Eje Y más específico\n    y = \"Ingreso (Pesos MXN)\",\n    color = \"Sexo\"\n  ) +\n  theme_minimal() +\n  # **Nueva capa para formato de eje Y**\n  scale_y_continuous(labels = label_number(big.mark = \",\", prefix = \"$\")) +\n  scale_color_manual(\n    values = c(\"1\" = \"#E41A1C\", \"2\" = \"#377EB8\"),\n    labels = c(\"1\" = \"Hombre\", \"2\" = \"Mujer\")\n  )\n#Para gente con educación bachiller\n\n# Se fija la escolaridad (cs_p13_1) en un nivel 4.\n\npredicciones_interaccion2 &lt;- ggpredict(\n  model = modelo3, \n  terms = c(\"eda [all]\", \"sex\", \"cs_p13_1 [4]\")\n)\ngrafico_interaccion2 &lt;- plot(predicciones_interaccion2) +\n  labs(\n    # Título que resalta la diferencia (hallazgo clave)\n    title = \"Ingresos por Edad y sexo\",\n    # Subtítulo para añadir el contexto de la escolaridad (profesionaliza el gráfico)\n    subtitle = \" Nivel de Escolaridad 4 (bachillerato)\",\n    x = \"Edad (años)\",\n    # Eje Y más específico\n    y = \"Ingreso (Pesos MXN)\",\n    color = \"Sexo\"\n  ) +\n  theme_minimal() +\n  # **Nueva capa para formato de eje Y**\n  scale_y_continuous(labels = label_number(big.mark = \",\", prefix = \"$\")) +\n  scale_color_manual(\n    values = c(\"1\" = \"purple\", \"2\" = \"gold\"),\n    labels = c(\"1\" = \"Hombre\", \"2\" = \"Mujer\")\n  )\ngrafico_interaccion1|grafico_interaccion2\n\n\n\n\n\n\n\n\nEste útlimo gráfico nos permite entender la relación lineal de la variable dependiente (ingreso) y las variables independientes (sexo, nivel educativo y edad).\nPara la visualización final se utilizó un patchwork que muestra la comparativa entre dos regresiones con diferentes grados de educación para ver cómo la variable ingreso se presenta diferenciadamente entre uno y otro, la cual nos incita a pensar en el peso de la educación para el aumento del ingreso y en el sesgo que presenta la edad y el sexo."
  },
  {
    "objectID": "proyectos/Mapa Wifi/Acceso Wifi.html",
    "href": "proyectos/Mapa Wifi/Acceso Wifi.html",
    "title": "Zonas de conexión gratuita en la Ciudad de México",
    "section": "",
    "text": "El siguiente código muestra la distribución de los 35,350 puntos de servicio de wifi en la Ciudad de México, los cuales los podemos encontrar en zonas como: el Aeropuerto, colonias periféricas, escuelas públicas, centros de salud, postes de calles, Pilares, postes del C5, sitios públicos, transporte público, unidades habitacionales y Utopías.\n      \n\nLas librerías que usaremos serán las siguientes:\n      \n\nlibrary(readxl)\nlibrary(tidyr)\nlibrary(httr)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(sf)\nlibrary(patchwork)\n\n\n###Cargamos las bases directamente del reservorio Github###\nurl_shp_raw &lt;- \"https://raw.githubusercontent.com/HeydrianAntunez/Proyecto-WIFI-CDMX/main/poligonos_alcaldias_cdmx.shp\"\nalcaldias_CDMX &lt;- st_read(paste0(\"/vsicurl/\", url_shp_raw), quiet = TRUE)\n##Guardamos la ruta para el archivo con los puntos de acceso\nurl_xlsx_raw&lt;-\"https://raw.githubusercontent.com/HeydrianAntunez/Proyecto-WIFI-CDMX/main/00-2025-wifi_gratuito_en_cdmx.xlsx\"\n#Creamos un archivo temporal donde R guardará el Excel descargado\narchivo_temporal &lt;- tempfile(fileext = \".xlsx\")\n# La función GET del paquete httr descarga el archivo\ninvisible(GET(url_xlsx_raw, write_disk(archivo_temporal, overwrite = TRUE)))\n# 3. Leer la hoja de Excel desde el archivo temporal\n  # Especificamos el nombre de la hoja (en este caso CDMX).\nwifi &lt;- read_excel(archivo_temporal, sheet = \"CDMX\")\n\n\nPara poder utilizar el archivo xlsx es necesario limpiar los datos geográficos y convertirlo a un archivo sph, lo que noa ayudará para le mapeado.\n\nwifi_limpio &lt;- wifi %&gt;%\n  drop_na(longitud, latitud)\nwifi_sf&lt;-st_as_sf(wifi_limpio, \n                  coords = c(\"longitud\", \"latitud\"),\n                  crs=4326)\n\n\nCon estos datos ya podemos graficar la zona de la Ciudad de México.\n\nggplot() +\n  # 1. CAPA BASE: Alcadías de la CDMX\n  geom_sf(data = alcaldias_CDMX, \n          fill = \"#212121\",        # Color gris oscuro profundo para el fondo \n          color = \"#BDBDBD\",       # Borde gris claro sutil\n          linewidth = 0.3) +       # Línea delgada\n  \n  # 2. PUNTOS WIFI: Se destacan sutilmente\n  geom_sf(data = wifi_sf, \n          color = \"#FFFFFF\",       # Blanco puro para visibilidad\n          size = 0.05,              # Puntos un poco más grandes para presencia\n          alpha = 0.8) +           # Menos transparente para mayor impacto\n  \n  # 3. LÍMITE Y SISTEMA DE COORDENADAS (Importante mantener 4326/WGS84 para geografía)\n  coord_sf(crs = 4326) +\n  # 4. ETIQUETAS INFORMATIVAS \n  labs(\n    title = \"Puntos de Acceso WiFi Gratuitos\",\n    subtitle = \"Distribución por Alcaldía en la Ciudad de México\",\n    caption = \"Fuente: [Datos Abiertos Agencia Digital de Innovación Pública (ADIP)]. \\nFecha: 1/09/2025\"\n  ) +\n  \n  # 5. TEMA Y ESTILOS (El corazón del diseño profesional)\n  theme_void() + \n  theme(\n    # FONDOS: Contraste con el mapa\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA), # Fondo general más oscuro\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA), # Fondo del panel (generalmente cubierto por geom_sf)\n    \n    # TEXTO: Títulos centrados, claros y estilizados\n    plot.title = element_text(\n      color = \"#FFFFFF\", \n      size = 12, \n      face = \"bold\",\n      hjust = 0.5,           # Centrado\n      margin = margin(t = 15)\n    ),\n    plot.subtitle = element_text(\n      color = \"#BDBDBD\", \n      size = 8, \n      hjust = 0.5,\n      margin = margin(b = 10)\n    ),\n    plot.caption = element_text(\n      color = \"#5E5E5E\", \n      size = 6, \n      hjust = 1,             # Alineado a la derecha\n      margin = margin(b = 5, r = 5)\n    ),\n    \n    # MARGENES (espacio alrededor del gráfico)\n    plot.margin = margin(10, 10, 10, 10)\n  )\n\n\n\n\n\n\n\n\n¿Cuáles son las alcaldías con mayores y menores puntos de acceso? Creamos unas tablas que nos muestren los top 5 alcaldías con mayores y menos puntos de acceso.\n\ntabla_top5_mayor&lt;-wifi_limpio%&gt;%\n  group_by(alcaldia)%&gt;%\n  summarise(Total_Puntos_Wifi= n())%&gt;%\n  arrange(desc(Total_Puntos_Wifi))%&gt;%\n  slice_head(n=5)\ntabla_top5_mayor\n\n# A tibble: 5 × 2\n  alcaldia          Total_Puntos_Wifi\n  &lt;chr&gt;                         &lt;int&gt;\n1 Iztapalapa                     4988\n2 Cuauhtemoc                     4021\n3 Gustavo A. Madero              3651\n4 Tlalpan                        3124\n5 Coyoacan                       2800\n\n\n\ntabla_top5_menor&lt;-wifi_limpio%&gt;%\n  group_by(alcaldia)%&gt;%\n  filter(alcaldia!=\"IZTAPALAPA\")%&gt;%\n  summarise(Total_Puntos_Wifi= n())%&gt;%\n  arrange(Total_Puntos_Wifi)%&gt;%\n  slice_head(n=5)\ntabla_top5_menor\n\n# A tibble: 5 × 2\n  alcaldia              Total_Puntos_Wifi\n  &lt;chr&gt;                             &lt;int&gt;\n1 Milpa Alta                          349\n2 Cuajimalpa de Morelos               737\n3 Magdalena Contreras                 797\n4 Xochimilco                          920\n5 Tlahuac                             990\n\n\nCreamos gráfiacs de columnas para cada una de las tablas y las guardamos.\n\ngráfica_top_mayor&lt;-ggplot(tabla_top5_mayor, aes(x= reorder(alcaldia,-Total_Puntos_Wifi), y= Total_Puntos_Wifi))+\n  geom_col(fill = \"#00BFFF\", # Color turquesa brillante (alto contraste con el fondo oscuro)\n           width = 0.7) +\n  geom_text(aes(label = Total_Puntos_Wifi), \n            vjust = -0.5, # Ajuste vertical para colocar la etiqueta justo arriba de la barra\n            color = \"#FFFFFF\", # Texto blanco brillante\n            size = 5,\n            # family = \"roboto\", # Descomentar si usaste showtext\n            fontface = \"bold\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) + # Asegura espacio para las etiquetas\n  labs(\n    title = \"Top 5 Alcaldías\",\n    x = NULL, # Quitamos la etiqueta del eje X (ya se entiende que son Alcaldías)\n    y = \"Total de Puntos WiFi\"\n  ) +\n  theme_minimal() + # Un buen punto de partida para gráficos de barras\n  theme(\n    # FONDOS\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.grid.major.x = element_blank(), # Quitamos las líneas verticales (no son necesarias)\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"#333333\"), # Líneas horizontales sutiles\n    \n    # TEXTO DE EJES Y ETIQUETAS\n    axis.text.x = element_text(color = \"#FFFFFF\", size = 12, angle = 45, hjust = 1), # Gira las etiquetas X\n    axis.text.y = element_text(color = \"#FFFFFF\", size = 12),\n    axis.title.y = element_text(color = \"#BDBDBD\", size = 12, margin = margin(r = 15)),\n    \n    # TÍTULOS\n    plot.title = element_text(color = \"#FFFFFF\", size = 20, face = \"bold\", hjust = 0.5, margin = margin(t = 15)),\n    plot.subtitle = element_text(color = \"#BDBDBD\", size = 14, hjust = 0.5, margin = margin(b = 20)),\n    plot.caption = element_text(color = \"#5E5E5E\", size = 8, hjust = 1, margin = margin(b = 5, r = 5)),\n    \n    plot.margin = margin(10, 10, 10, 10)\n  )\n\ngráfica_top_menor&lt;-ggplot(tabla_top5_menor, aes(x= reorder(alcaldia,-Total_Puntos_Wifi), y= Total_Puntos_Wifi))+\n  geom_col(fill = \"#00BFFF\", # Color turquesa brillante (alto contraste con el fondo oscuro)\n           width = 0.7) +\n  geom_text(aes(label = Total_Puntos_Wifi), \n            vjust = -0.5, # Ajuste vertical para colocar la etiqueta justo arriba de la barra\n            color = \"#FFFFFF\", # Texto blanco brillante\n            size = 5,\n            # family = \"roboto\", # Descomentar si usaste showtext\n            fontface = \"bold\") +\n  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) + # Asegura espacio para las etiquetas\n  labs(\n    title = \"Top 5 Alcaldías\",\n    x = NULL, # Quitamos la etiqueta del eje X (ya se entiende que son Alcaldías)\n    y = \"Total de Puntos WiFi\"\n  ) +\n  theme_minimal() + # Un buen punto de partida para gráficos de barras\n  theme(\n    # FONDOS\n    plot.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.background = element_rect(fill = \"#1A1A1A\", color = NA),\n    panel.grid.major.x = element_blank(), # Quitamos las líneas verticales (no son necesarias)\n    panel.grid.minor.y = element_blank(),\n    panel.grid.major.y = element_line(color = \"#333333\"), # Líneas horizontales sutiles\n    \n    # TEXTO DE EJES Y ETIQUETAS\n    axis.text.x = element_text(color = \"#FFFFFF\", size = 12, angle = 45, hjust = 1), # Gira las etiquetas X\n    axis.text.y = element_text(color = \"#FFFFFF\", size = 12),\n    axis.title.y = element_text(color = \"#BDBDBD\", size = 12, margin = margin(r = 15)),\n    \n    # TÍTULOS\n    plot.title = element_text(color = \"#FFFFFF\", size = 20, face = \"bold\", hjust = 0.5, margin = margin(t = 15)),\n    plot.subtitle = element_text(color = \"#BDBDBD\", size = 14, hjust = 0.5, margin = margin(b = 20)),\n    plot.caption = element_text(color = \"#5E5E5E\", size = 8, hjust = 1, margin = margin(b = 5, r = 5)),\n    \n    plot.margin = margin(10, 10, 10, 10)\n  )\n\nPresentamos las dos tablas en un dashboard que nos permita compararlas y entender mejor la distribución de los puntos wifi.\n\ngráfica_top_mayor|gráfica_top_menor\n\n\n\n\n\n\n\n\n\nConclusión\nExplorar la base de datos de la Agencia Digital de Innovación Pública nos permite observar algo crucial: la falta de instalalaciones para estos servicios públicos en las zonas sur de la ciudad. Cabe preguntarse por qué en Milpa Alta apenas y existen 349 puntos de acceso, siendo que en las cinco alcaldías con mayores puntos la cifra supera los 2800.\nFuente: https://datos.cdmx.gob.mx/dataset/puntos-de-acceso-wifi-en-la-cdmx"
  },
  {
    "objectID": "proyectos/CONACYT/Investigadores CONACYT.html",
    "href": "proyectos/CONACYT/Investigadores CONACYT.html",
    "title": "Investigadores CONACYT 2018",
    "section": "",
    "text": "Dashboard: información sobre los investigadores del CONACYT"
  },
  {
    "objectID": "CV.html",
    "href": "CV.html",
    "title": "",
    "section": "",
    "text": "title: \"CV\"\nformat: pdf\neditor: visual"
  },
  {
    "objectID": "Portafolio.html",
    "href": "Portafolio.html",
    "title": "Portafolio",
    "section": "",
    "text": "Mapa Wifi Gratuito en la CDMX\n            Agosto 2025\n        \n    \n\n    \n        \n            \n        \n        \n            Ponderación de Ingresos y cálculo de tasas\n            Septiembre 2025\n        \n    \n\n    \n        \n            \n        \n        \n            Diseño muestral\n            Octubre 2025\n        \n    \n\n    \n        \n            \n        \n        \n            Modelos de regresión\n            Noviembre 2025\n        \n    \n    \n    \n        \n            \n        \n        \n            POWER BI: Investigadores CONACYT\n            Noviembre 2025\n        \n    \n    \n    \n        \n            \n        \n        \n            POWER BI: Incidentes Delictivos México 2025\n            Noviembre 2025"
  },
  {
    "objectID": "proyectos/Diseño de muestras complejas/Diseño-muestras-complejas.html",
    "href": "proyectos/Diseño de muestras complejas/Diseño-muestras-complejas.html",
    "title": "Diseño de muestras complejas y modelos de regresión",
    "section": "",
    "text": "este enlace.\nComo primer paso cargamos las librerías.\nlibrary(foreign)\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(survey)\nlibrary(scales)\nAbrimos la base de datos que usaremos (sustituir ruta).\nEnoe_2025_T2&lt;-read.csv(\"C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_2025_2t.csv\")\nExploramos los estratos y los conglomerados que se emplearán para el diseño de la muestra.\nggplot(Enoe_2025_T2, aes(x=fac_tri))+\n  geom_histogram()+\n  facet_wrap(~est)\n\n\n\n\n\n\n\n#Observamos el tamaño de los cluster.\n#| message: false\n#| warning: false\nEnoe_2025_T2%&gt;%\n  summarize(n_clusters=n_distinct(est, upm))\n\n  n_clusters\n1      21188\n\n#Para ver en detalle la composición de los clusters correr el código:\n  #Enoe_2025_T2%&gt;%\n  #count(est, upm)\nCreamos nuestro diseño muestral.\ndiseno&lt;-svydesign(id=~upm, strata=~est, data=Enoe_2025_T2, \n                  weights=~fac_tri)\nEl diseño muestral es la parte clave para la utilización muestras complejas, ya que nos permite realizar inferencias sobre la población utilizando una muestra (en este caso, una muestra recogida de la ENOE). Es necesario continuar la utilización del diseño (calculado con la paquetería survey) para hacer uso de estimadores puntales más precisos. Ejemplo de la diferencia entre valores no ponderados y ponderados (mediante diseño muestral):\n#No ponderado\nsex&lt;-Enoe_2025_T2%&gt;%\n  group_by(sex)%&gt;%\n  summarize(Freq= n())%&gt;%  #Contamos el la frecuencia agrupada por sexo\n  mutate(Prop=round(Freq*100/sum(Freq), 1))%&gt;% #Calculamos la proporción para cada grupo de sexo\n  arrange(desc(Prop)) #Ordenamos de forma descendente\nsex\n\n# A tibble: 3 × 3\n    sex   Freq  Prop\n  &lt;int&gt;  &lt;int&gt; &lt;dbl&gt;\n1     2 216059  51  \n2     1 197821  46.7\n3    NA   9864   2.3\n\n#Ponderado\nsex_fac&lt;-svytable(~sex, design=diseno)%&gt;%  #Creamos una tabla a partir de los datos del diseño muestral\n  as.data.frame()%&gt;% #Convertimos la data del diseño a un data frame\n  mutate(Prop=round(Freq*100/sum(Freq), 1))%&gt;%\n  arrange(desc(Prop))\nsex_fac\n\n  sex     Freq Prop\n1   2 68315426 52.3\n2   1 62260360 47.7\n1\n#No ponderado\nedu&lt;-Enoe_2025_T2%&gt;%\n  group_by(cs_p13_1)%&gt;%\n  summarize(Freq=n())%&gt;%\n  mutate(Prop=round(Freq*100/sum(Freq), 1))\nedu\n\n# A tibble: 12 × 3\n   cs_p13_1   Freq  Prop\n      &lt;int&gt;  &lt;int&gt; &lt;dbl&gt;\n 1        0  13278   3.1\n 2        1  14088   3.3\n 3        2 100655  23.8\n 4        3  98738  23.3\n 5        4  77410  18.3\n 6        5   1125   0.3\n 7        6  10374   2.4\n 8        7  69832  16.5\n 9        8   5233   1.2\n10        9    820   0.2\n11       99    598   0.1\n12       NA  31593   7.5\n\n#Ponderado\neduca_fac&lt;-svytable(~cs_p13_1, design = diseno)%&gt;%\n  as.data.frame()%&gt;%\n  mutate(Prop_ponderada=round(Freq*100/sum(Freq), 1))\neduca_fac\n\n   cs_p13_1     Freq Prop_ponderada\n1         0  4820649            3.9\n2         1  4479104            3.6\n3         2 33478852           27.1\n4         3 30862018           24.9\n5         4 23775017           19.2\n6         5   289694            0.2\n7         6  3337528            2.7\n8         7 20680934           16.7\n9         8  1597867            1.3\n10        9   220364            0.2\n11       99   179911            0.1\n2\nObservamos gráficamente los resultados de las tablas.\n#Gráfica con datos de educación no ponederados\nggplot(data = edu[edu$cs_p13_1 &lt; 10, ], \n       aes(x = factor(cs_p13_1), y = Prop)) + \n  geom_col(fill = \"lightblue\") +\n  scale_x_discrete(labels = c(\"Ninguna\", \"Preescolar\", \"Primaria\", \"Secundaria\", \n                              \"Preparatoria\", \"Normal\", \"Carrera técnica\", \n                              \"Profesional\", \"Maestría\", \"Doctorado\")) + \n  theme(axis.text = element_text(size = 10, angle = 45), \n        legend.position = \"none\") +\n  geom_text(aes(label = paste0(Freq, \" \", \"\", \"\\n(\", Prop, \"%)\"))) +\n  labs(title = \"Niveles de educación: Frecuencia y proporción no ponderadas\", \n       x = \"Nivel de educación\", y = \"Proporción\")\n\n\n\n\n\n\n\n#Gráfica con datos ponderados\nggplot(data = educa_fac, aes(x=cs_p13_1, y= Prop_ponderada))+\n  geom_col(fill=\"darkred\")+\n  scale_x_discrete(limits=edu[edu$cs_p13_1 &lt; 10,]$cs_p13_1, labels=c(\"Ninguna\",\"Preescolar\",\"Primaria\", \"Secundaria\", \n                                                       \"Preparatoria\", \n                                                       \"Normal\", \"Carrera técnica\",\n                                                       \"Profesional\", \n                                                       \"Maestría\",\"Doctorado\",\"No sabe\"))+\n  theme(axis.text = element_text(size=10, angle=45),legend.position = \n          \"none\")+\n  geom_text(aes(label=paste0(Freq, \" \", \"\", \"\\n(\", Prop_ponderada, \"%\",\")\")))+ \n  labs(title=\"Niveles de educación: Frecuencia y proporción ponderadas\", x=\"Nivel \nde educación\",y=\"Proporción\")\nContinuando con el análisis de datos ponderados, creamos una tabla de contingencia para las variables sexo y educación.\n#Data no ponderada\nEnoe_2025_T2%&gt;%\n  group_by(sex, cs_p13_1)%&gt;%\n  summarise(Freq= n())\n\n`summarise()` has grouped output by 'sex'. You can override using the `.groups`\nargument.\n\n\n# A tibble: 25 × 3\n# Groups:   sex [3]\n     sex cs_p13_1  Freq\n   &lt;int&gt;    &lt;int&gt; &lt;int&gt;\n 1     1        0  5570\n 2     1        1  7125\n 3     1        2 48411\n 4     1        3 47327\n 5     1        4 38374\n 6     1        5   305\n 7     1        6  3011\n 8     1        7 33567\n 9     1        8  2379\n10     1        9   418\n# ℹ 15 more rows\n\n#Data ponderada con diseño muestral\neduca_sex&lt;- svytable(~cs_p13_1+ sex, design = diseno)\neduca_sex\n\n        sex\ncs_p13_1        1        2\n      0   2003542  2817107\n      1   2273821  2205283\n      2  16045579 17433273\n      3  14771561 16090457\n      4  11726053 12048964\n      5     66848   222846\n      6    976599  2360929\n      7   9947585 10733349\n      8    742697   855170\n      9    109866   110498\n      99    93952    85959\n\n#Lo convertimos a un dataframe\neduca_sex&lt;- as.data.frame(educa_sex)\neduca_sex\n\n   cs_p13_1 sex     Freq\n1         0   1  2003542\n2         1   1  2273821\n3         2   1 16045579\n4         3   1 14771561\n5         4   1 11726053\n6         5   1    66848\n7         6   1   976599\n8         7   1  9947585\n9         8   1   742697\n10        9   1   109866\n11       99   1    93952\n12        0   2  2817107\n13        1   2  2205283\n14        2   2 17433273\n15        3   2 16090457\n16        4   2 12048964\n17        5   2   222846\n18        6   2  2360929\n19        7   2 10733349\n20        8   2   855170\n21        9   2   110498\n22       99   2    85959\nObtenemos las proporciones de niveles de educación por sexo:\nprop_edu_sex&lt;- educa_sex%&gt;%\n  as.data.frame()%&gt;%\n  group_by(sex)%&gt;%\n  mutate(n_sex=sum(Freq), Prop_educa=Freq/sum(Freq))%&gt;%\n  ungroup\nprop_edu_sex\n\n# A tibble: 22 × 5\n   cs_p13_1 sex       Freq    n_sex Prop_educa\n   &lt;fct&gt;    &lt;fct&gt;    &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;\n 1 0        1      2003542 58758103    0.0341 \n 2 1        1      2273821 58758103    0.0387 \n 3 2        1     16045579 58758103    0.273  \n 4 3        1     14771561 58758103    0.251  \n 5 4        1     11726053 58758103    0.200  \n 6 5        1        66848 58758103    0.00114\n 7 6        1       976599 58758103    0.0166 \n 8 7        1      9947585 58758103    0.169  \n 9 8        1       742697 58758103    0.0126 \n10 9        1       109866 58758103    0.00187\n# ℹ 12 more rows\nGraficamos las proporciones de niveles de educación por sexo:\nggplot(data= prop_edu_sex, aes(x= sex, fill = cs_p13_1, y= Prop_educa))+\n  geom_col()+\n  scale_fill_discrete(labels =c(\"Ninguna\",\"Preescolar\",\"Primaria\", \"Secundaria\", \n                                \"Preparatoria\", \n                                \"Normal\", \"Carrera técnica\",\n                                \"Profesional\", \n                                \"Maestría\",\"Doctorado\",\"No sabe\"))+\n  guides(fill=guide_legend(title=\"Nivel\"))+\n  scale_x_discrete( labels=c(\"Hombres\", \"Mujeres\"))+\n  theme(axis.text = element_text(size=10, angle=45),legend.position = \n          \"right\")+\n  labs(title=\"Nivel de educación del jefe de familia por sexo\", \n       x=\"Sexo\",y=\"Proporción\")\nGraficamos la tabla de niveles de educación por sexo:\nggplot(data=prop_edu_sex, aes(x=cs_p13_1, fill = sex, y= Freq))+\n  geom_col(position = \"dodge\")+   #Colocamos columnas separadas.\n  geom_text(\n    aes(label = scales::label_percent(accuracy = 0.01)(Prop_educa)), # 2. Usar label_percent\n    position = position_dodge(width = 0.9),\n    vjust = -0.5,\n    size = 2 # Aumenté un poco el tamaño de la fuente para mejor legibilidad\n  ) +\n  scale_y_continuous(labels = scales::label_number(big.mark = \",\", decimal.mark = \".\"))+\n  scale_fill_discrete(labels=c(\"Hombres\",\"Mujeres\"))+  #Colocamos etiquetas para la variable sexo.\n  guides(fill=guide_legend(title = \"Sexo\"))+\n  scale_x_discrete(limits=educa_sex$cs_p13_1, labels=c(\"Ninguna\",\"Preescolar\",\"Primaria\", \"Secundaria\",\"Preparatoria\",\"Normal\", \"Carrera técnica\",\"Profesional\",\"Maestría\",\"Doctorado\",\"No sabe\"))+\n  theme(axis.text = element_text(size= 10, angle=45), legend.position =\"right\")+\n  labs(tittle=\"Nivel de educacion del jefe de familia\", x=\"Nivel educativo\", y= \"Total de personas\")\nCon la exploración de las tablas y de las gráficas podemos pensar que existe una diferencia entre niveles educativos en función de la variable sexo. Para observar mejor esta diferencia, debemos cuantificar esta relación. Para ello, realizamos una prueba de independencia chi-cuadrado, aplicando el diseño muestra establecido y sometiendo al cálculo de la función svychisq a las variables categóricas (nivel de educación en función del sexo).\nsvychisq(~cs_p13_1+sex, design = diseno, static=\"Chisq\") #Prueba de independencia Chi-cuadrada de pearson\n\n\n    Pearson's X^2: Rao & Scott adjustment\n\ndata:  svychisq(~cs_p13_1 + sex, design = diseno, static = \"Chisq\")\nF = 78.013, ndf = 9.5774e+00, ddf = 2.0289e+05, p-value &lt; 2.2e-16\nResultados: Debido al diseño muetral complejo, el svychisq no proudce un valor de x cuadrado estándar, en su lugar calcula un Estadístico F de Rao y Scott para probar la independencia.\nF = 78.013: resume qué tan grande es la diferencia observada entre las frecuencias esperadas y las dos variables si fueran completamente independientes. Un valor grande sugiere una independencia poco probable.\nP-value &lt; 2.2e-16: Representa la probabilidad de observar un estadístico de F si H0 (hipótesis nula) fuera cierta. Un valor extremadamente pequeño (con significancia alpha&lt;0.05) indica que es altamente improbable que las variables sean independientes.\nPara este caso se rechaza H0, lo que implica una relación de dependencia entre varaibles. Para el siguiente análisis tomaremos una variable numérica continua: el ingreso.\n#Como primer paso creamos un filtro para analizar sólo aquellas observaciones que tengan un ingreso&gt;0\n\ndiseño_ingresos_filt&lt;-subset(diseno, ingocup &gt;0) \n\n#Calculamos la media bajo el diseño muestras complejas. Esto permite observar los errores estándar para el cálculo de las estimaciones.\nsvymean(~ingocup, design= diseño_ingresos_filt, na.rm= T)\n\n         mean     SE\ningocup 10221 67.744\n\n#Calculamos los cuartiles\nsvyquantile(~ingocup, design= diseño_ingresos_filt, na.rm= T, quantile=c(0.01,.25,.5,.75,.9))\n\n$ingocup\n     quantile ci.2.5 ci.97.5        se\n0.01      625    591     645  13.77491\n0.25     5200   5160    5590 109.68907\n0.5      8600   8600    9000 102.03634\n0.75    12900  12900   13200  76.52726\n0.9     18000  18000   19286 328.04684\n\nattr(,\"hasci\")\n[1] TRUE\nattr(,\"class\")\n[1] \"newsvyquantile\"\nResultados:\nsvymean: El ingreso promedio ponderado de la población mexicana para el 2025 trimestre 2 es de 10,221 $, con un error estandar de 67. 74.\nPara el cálculo de los cuartiles, el caso más interesante y representativo es el cualtil 0.75 (Q3), el cual presenta que el 75 por ciento de la población tiene ingresos de 12,900 pesos o menos. También podemos observar el cálculo del error estándar (76.5), el cual mide la variabilidad de la muestra, y los intervalos de confianza al 95 por ciento de confiabilidad de que el estimador capture el valor poblacional (CI 2.5= 12,900 y CI 97.5= 13,200).\nA continuación realizamos un cruce de la variable continua ingreso con la variable categórica sexo:\nsvyby(~ingocup, design= diseño_ingresos_filt, na.rm=T, by = ~sex, FUN=svymean, row.names=F)\n\n  sex   ingocup       se\n1   1 11243.519 82.28850\n2   2  8777.517 77.20672\nCon esta tabla podemos observar cómo se distribuye el ingreso ponderado según el sexo de la población. Podemos hacer la comparativa con datos sin ponderar:\nEnoe_2025_T2%&gt;%\n  filter(ingocup&gt;0)%&gt;%\n  group_by(sex)%&gt;%\n  summarize(Frecuencia=n(), Ingreso_medio=mean(ingocup), se=sd(ingocup)/sqrt(Frecuencia))\n\n# A tibble: 2 × 4\n    sex Frecuencia Ingreso_medio    se\n  &lt;int&gt;      &lt;int&gt;         &lt;dbl&gt; &lt;dbl&gt;\n1     1      67645        11825.  36.7\n2     2      49815         9022.  33.4\nRecordemos que, si bien los datos no varían enormemente, el diseño muestral ajusta correctamente los valores para poder tener estimadores mejor calculados.\nHacemos el mismo ejercicio para los datos de ingreso en función del nivel educativo.\n#Ponderado\nsvyby(~ingocup, design = diseño_ingresos_filt, na.rm=T, by = ~cs_p13_1, FUN= svymean, row.names= F)\n\n   cs_p13_1   ingocup         se\n0         0  5528.928  128.56750\n1         1  7715.929 1155.84440\n2         2  7398.815   81.05844\n3         3  8632.252   58.85950\n4         4 10033.133   76.19296\n5         5 11006.059  948.80657\n6         6 10432.829  185.06053\n7         7 15208.360  178.97815\n8         8 23069.260  747.91470\n9         9 26449.326 1363.12036\n99       99  9238.416  616.59074\n\n#Sin ponderar\nEnoe_2025_T2%&gt;%\n  filter(ingocup&gt;0)%&gt;%\n  group_by(cs_p13_1)%&gt;%\n  summarize(Frecuencia= n(), Ingreso_medio=mean(ingocup), se=sd(ingocup)/sqrt(Frecuencia))\n\n# A tibble: 11 × 4\n   cs_p13_1 Frecuencia Ingreso_medio    se\n      &lt;int&gt;      &lt;int&gt;         &lt;dbl&gt; &lt;dbl&gt;\n 1        0       2826         5963.  92.5\n 2        1         51         8411. 687. \n 3        2      19718         7832.  43.5\n 4        3      34848         9014.  32.8\n 5        4      28836        10333.  45.0\n 6        5        117        11327. 789. \n 7        6       3083        10905. 139. \n 8        7      25370        14800.  74.1\n 9        8       2140        21285. 331. \n10        9        337        24301. 836. \n11       99        134         9903. 548.\nCreamos una tabla que calcule los ingresos en función tanto de la educación como del sexo. Para esta ocasión, usaremos la mediana como medida de referencia, ya que es una medida de distribución que no se ve tan afectada por valores extremos o valores atípicos.\n#Primero aplicamos el diseño muestral a nuestra tabla para obtener el cuartil .50 (mediana)\ntabla&lt;-svyby(formula = ~ingocup, by= ~ cs_p13_1+sex, design= diseño_ingresos_filt, FUN = svyquantile, quantiles=0.5, row.names=F, na.rm=T,\n             keep.names = F)\n#Añadimos a la tabla el error estándar\ntabla&lt;- mutate(tabla, lower=ingocup-se.ingocup, upper=ingocup+se.ingocup)\ntabla\n\n   cs_p13_1 sex ingocup se.ingocup     lower     upper\n1         0   1    6020  273.97291  5746.027  6293.973\n2         1   1    6450 2115.88713  4334.113  8565.887\n3         2   1    7740  197.41475  7542.585  7937.415\n4         3   1    8600  109.68267  8490.317  8709.683\n5         4   1    9890  115.80448  9774.196 10005.804\n6         5   1    9000 2219.81518  6780.185 11219.815\n7         6   1   10750  328.73013 10421.270 11078.730\n8         7   1   12900  219.36076 12680.639 13119.361\n9         8   1   20000 1019.01703 18980.983 21019.017\n10        9   1   26000 1518.84187 24481.158 27518.842\n11       99   1    7740  972.14188  6767.858  8712.142\n12        0   2    3440  328.66664  3111.333  3768.667\n13        1   2    7000 1948.36153  5051.638  8948.362\n14        2   2    5100  164.50329  4935.497  5264.503\n15        3   2    6450  109.68006  6340.320  6559.680\n16        4   2    7740   66.31769  7673.682  7806.318\n17        5   2   10000 1654.18060  8345.819 11654.181\n18        6   2    8170  152.95793  8017.042  8322.958\n19        7   2   11600  255.06900 11344.931 11855.069\n20        8   2   16000  509.66110 15490.339 16509.661\n21        9   2   20000 2531.65042 17468.350 22531.650\n22       99   2    8364  746.27154  7617.728  9110.272\ntabla$sex &lt;- as.factor(tabla$sex)\n\nggplot(tabla, aes(x = factor(cs_p13_1), y = ingocup, color = sex)) +\n geom_point(size = 4,\n           position = position_dodge(width = 0.7)) +\n  scale_y_continuous(labels = label_dollar(prefix = \"$\")) + \n  scale_x_discrete(labels = c(\"Ninguna\",\"Preescolar\",\"Primaria\", \"Secundaria\",\"Preparatoria\",\"Normal\", \"Carrera técnica\",\"Profesional\",\"Maestría\",\"Doctorado\",\"No sabe\")) +\n  geom_text(\n    aes(label = label_dollar(prefix = \"$\")(ingocup), \n        group = sex),\n    vjust = -2.5,\n    position = position_dodge(width = 0.7),\n    size = 2\n  ) +\n  scale_color_manual(values = c(\"1\" = \"#0072B2\", \"2\" = \"#D55E00\"),\n                     labels = c(\"Hombres\", \"Mujeres\")) +\n  theme_minimal() + \n  labs(title = \"Medianas de los ingresos por nivel educativo y sexo\",\n       x = \"Nivel Educativo\",\n       y = \"Ingreso Promedio ($)\",\n       color = \"Sexo\",\n       caption= \"Fuente:Encuesta Nacional de Ocupación y Empleo, INEGI\") +\ntheme(\n    axis.text.x = element_text(angle = 45, hjust = 1), \n    plot.title = element_text(face = \"bold\"),\n    plot.caption = element_text(hjust = 1.5) \n)\nAhora hacemos un boxplot con las mismas varaibles para ver la distribución de ingresos en cada nivel educativo.\netiquetas_educativas &lt;- c(\"Ninguna\", \"Preescolar\", \"Primaria\", \"Secundaria\", \n                          \"Preparatoria\", \"Normal\", \"Carrera técnica\", \n                          \"Profesional\", \"Maestría\", \"Doctorado\")\nniveles_numericos &lt;- 0:9\n\nEnoe_2025_ing_filt&lt;-Enoe_2025_T2%&gt;%\n  filter(ingocup&gt;0) #Filtramos la base\n\nEnoe_2025_ing_filt_etiquetado &lt;- Enoe_2025_ing_filt %&gt;%\n  # 2.1 Crear la columna factorizada\n  mutate(cs_p13_1_factor = factor(cs_p13_1, \n                                  levels = niveles_numericos, \n                                  labels = etiquetas_educativas)) %&gt;%\n  # 2.2 Aplicar el filtro original\n  filter(!is.na(ingocup),\n         !is.na(sex))\n\n# 3. Generar el gráfico usando la nueva columna factorizada en facet_wrap\nggplot(data = Enoe_2025_ing_filt_etiquetado, \n       mapping = aes(x = as.factor(sex), y = ingocup, color = sex)) +\n  geom_boxplot() +\n  labs(x = \"Sexo\", \n       y = \"Ingreso\",\n       title = \"Ingreso por Sexo segmentado por Nivel Educativo\") +\n  # Usar la columna factorizada para los paneles\n  facet_wrap(~cs_p13_1_factor, \n             labeller = label_value, # Usamos solo el valor de la etiqueta del factor\n             scales = \"free_y\") + # Usar \"free_y\" o \"free\" si quieres que las escalas se ajusten a cada panel\n  theme(axis.text.x = element_blank(), # Quitamos las etiquetas redundantes del eje X en cada panel\n        axis.ticks.x = element_blank())\nTambién podemos graficar los ingresos con base en el sexo y la edad:\nlibrary(scales)\nggplot(Enoe_2025_ing_filt, aes(x=eda, y= ingocup, size= fac_tri, color=sex)) +\n  geom_jitter(width = 0.3, height = 0) +\n  guides(size=\"none\") +\n  scale_y_continuous(labels = label_number(big.mark = \",\", decimal.mark = \".\")) +\n  labs(y=\"Ingreso Ocupacional\", \n       x=\"Edad (eda)\",\n       title=\"Ingreso Ocupacional vs. Edad, por Sexo\")"
  },
  {
    "objectID": "proyectos/Diseño de muestras complejas/Diseño-muestras-complejas.html#footnotes",
    "href": "proyectos/Diseño de muestras complejas/Diseño-muestras-complejas.html#footnotes",
    "title": "Diseño de muestras complejas y modelos de regresión",
    "section": "Footnotes",
    "text": "Footnotes\n\n\nLa variable sex está compuesta por los valores 1= Hombre y 2= Mujeres.↩︎\ncs_p13_1= Grado aprobado en la Escuela.↩︎"
  },
  {
    "objectID": "proyectos/Ingresos/tasa-final-de-ingresos.html",
    "href": "proyectos/Ingresos/tasa-final-de-ingresos.html",
    "title": "Tasa de Ingresos 2015-2025, INEGI (ENOE)",
    "section": "",
    "text": "El presente proyecto es un ejemplo de la aplicación de diseño muestral en la encuesta de la ENOE del INEGI para calcular las tasas anuales del ingreso en México durante un periodo de 10 años  (2015 al 2025).\n      \n\nLas librerías que usaremos serán las siguientes:\n      \n\nlibrary(dplyr)\nlibrary(survey)\nlibrary(ggplot2)\n\n\n    \n        Para obtener las bases de datos necesarias, puedes descargarlas aquí:\n        \n            Encuesta Nacional de Ocupación y Empleo (ENOE), población de 15 años y más de edad\n        \n        .\n    \n\n\nPara cargar las bases necesitamos crear las rutas y establecer unos valores para poner automatizar el trabajo.\n      \n\n#Asegúrate de reemplazar el código con la ruta en la que tienes los documentos.\nruta&lt;- \"C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_\"\naños&lt;- 2015:2025\ntrimestres&lt;-1:4\n\n\nCon esto podemos emplear el bucle para abrir las bases de datos.\n      \n\nfor (año in años) {\n  for (trimestre in trimestres) {\n    \n    nombre_archivo &lt;- paste0(ruta, año, \"_\", trimestre, \"t.csv\")\n    nombre_variable &lt;- paste0(\"Enoe_\", año, \"_T\", trimestre)\n    \n    # Intenta leer el archivo y asignarlo\n    tryCatch({\n      \n      assign(nombre_variable, read.csv(nombre_archivo))\n      cat(\"✅ Éxito al cargar:\", nombre_variable, \"\\n\")\n      \n    }, error = function(e) {\n      \n      # Si ocurre un error (como que el archivo no existe), ejecuta esto\n      cat(\"⚠️ AVISO: No se pudo cargar el archivo:\", nombre_archivo, \"\\n\")\n      \n      # Puedes añadir una condición específica si es el 2020 T2 para un mensaje claro\n      if (año == 2020 & trimestre == 2) {\n        cat(\"   * Razón: Archivo omitido intencionalmente (encuesta no realizada en T2 2020).\", \"\\n\")\n      } else {\n        cat(\"   * Mensaje de error:\", conditionMessage(e), \"\\n\")\n      }\n      cat(\"\\n\") # Salto de línea para separar las iteraciones\n      \n    })\n    \n    # El bucle sigue automáticamente con la siguiente iteración sin detenerse\n  }\n}\n\n✅ Éxito al cargar: Enoe_2015_T1 \n✅ Éxito al cargar: Enoe_2015_T2 \n✅ Éxito al cargar: Enoe_2015_T3 \n✅ Éxito al cargar: Enoe_2015_T4 \n✅ Éxito al cargar: Enoe_2016_T1 \n✅ Éxito al cargar: Enoe_2016_T2 \n✅ Éxito al cargar: Enoe_2016_T3 \n✅ Éxito al cargar: Enoe_2016_T4 \n✅ Éxito al cargar: Enoe_2017_T1 \n✅ Éxito al cargar: Enoe_2017_T2 \n✅ Éxito al cargar: Enoe_2017_T3 \n✅ Éxito al cargar: Enoe_2017_T4 \n✅ Éxito al cargar: Enoe_2018_T1 \n✅ Éxito al cargar: Enoe_2018_T2 \n✅ Éxito al cargar: Enoe_2018_T3 \n✅ Éxito al cargar: Enoe_2018_T4 \n✅ Éxito al cargar: Enoe_2019_T1 \n✅ Éxito al cargar: Enoe_2019_T2 \n✅ Éxito al cargar: Enoe_2019_T3 \n✅ Éxito al cargar: Enoe_2019_T4 \n✅ Éxito al cargar: Enoe_2020_T1 \n\n\nWarning in file(file, \"rt\"): no fue posible abrir el archivo\n'C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a\n2025/conjunto_de_datos_sdem_enoe_2020_2t.csv': No such file or directory\n\n\n⚠️ AVISO: No se pudo cargar el archivo: C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_2020_2t.csv \n   * Razón: Archivo omitido intencionalmente (encuesta no realizada en T2 2020). \n\n✅ Éxito al cargar: Enoe_2020_T3 \n✅ Éxito al cargar: Enoe_2020_T4 \n✅ Éxito al cargar: Enoe_2021_T1 \n✅ Éxito al cargar: Enoe_2021_T2 \n✅ Éxito al cargar: Enoe_2021_T3 \n✅ Éxito al cargar: Enoe_2021_T4 \n✅ Éxito al cargar: Enoe_2022_T1 \n✅ Éxito al cargar: Enoe_2022_T2 \n✅ Éxito al cargar: Enoe_2022_T3 \n✅ Éxito al cargar: Enoe_2022_T4 \n✅ Éxito al cargar: Enoe_2023_T1 \n✅ Éxito al cargar: Enoe_2023_T2 \n✅ Éxito al cargar: Enoe_2023_T3 \n✅ Éxito al cargar: Enoe_2023_T4 \n✅ Éxito al cargar: Enoe_2024_T1 \n✅ Éxito al cargar: Enoe_2024_T2 \n✅ Éxito al cargar: Enoe_2024_T3 \n✅ Éxito al cargar: Enoe_2024_T4 \n✅ Éxito al cargar: Enoe_2025_T1 \n✅ Éxito al cargar: Enoe_2025_T2 \n\n\nWarning in file(file, \"rt\"): no fue posible abrir el archivo\n'C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a\n2025/conjunto_de_datos_sdem_enoe_2025_3t.csv': No such file or directory\n\n\n⚠️ AVISO: No se pudo cargar el archivo: C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_2025_3t.csv \n   * Mensaje de error: no se puede abrir la conexión \n\n\nWarning in file(file, \"rt\"): no fue posible abrir el archivo\n'C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a\n2025/conjunto_de_datos_sdem_enoe_2025_4t.csv': No such file or directory\n\n\n⚠️ AVISO: No se pudo cargar el archivo: C:/Users/USER/Downloads/Bases de datos/INEGI/ENOE SDME 2015 a 2025/conjunto_de_datos_sdem_enoe_2025_4t.csv \n   * Mensaje de error: no se puede abrir la conexión \n\n\n\nNotas importantes: el código está pensado para arrojar mensajes de \"Exito al cargar\" y \"Aviso: no se pudo cargar\". Para el trimestre 2 del año 2020, debido a la pandemia, no existen datos de la ENOE. Lo mismo pasa para los trimestres 3 y 4 del 2025 (debido a que aún no existen datos).\n      \n\nLo siguiente es preparar los datos. Para ello, vamos a hacer tres pasos importantes: filtrar los datos por ingresos superiores a 0, aplicar diseño muestral y calcular la media y los intervalos de confianza. Para ello, creamos un bucle que almacenará los estadísticos resultantes en un sólo dataframe.\n      \n\nNotas: \n  *El diseño muestral presenta variaciones en las variables, por lo que es necesario ajustar el bucle.\n  *Es necesario emplear el diseño muestral mediante svy para tener datos más precisos.\n      \n\n#Creamos un data frame que contendrá los resultados de la iteración\nserie_ingreso_total &lt;- data.frame()\n\nfor (año in años) {\n  for (trimestre in trimestres) {\n    \n    nombre_df &lt;- paste0(\"Enoe_\", año, \"_T\", trimestre)\n    \n    # --- Ajuste Condicional del Factor de Peso ---\n    if (año &gt; 2020 | (año == 2020 & trimestre &gt;= 2)) {\n      peso_actual_str &lt;- \"fac_tri\" \n      peso_antiguo_str &lt;- \"FAC_TRI\" \n    } else {\n      peso_actual_str &lt;- \"fac\"\n      peso_antiguo_str &lt;- \"FAC\" \n    }\n    # ---------------------------------------------\n    \n    tryCatch({\n      \n      df_actual &lt;- get(nombre_df)\n      \n      \n      #  Corrección: UPM (mayúsculas) a upm (minúsculas)\n      if (!(\"upm\" %in% names(df_actual)) && (\"UPM\" %in% names(df_actual))) {\n        df_actual &lt;- df_actual %&gt;% rename(upm = UPM) \n      } \n      \n      # NUEVA CORRECCIÓN: EST (mayúsculas) a est (minúsculas)\n      if (!(\"est\" %in% names(df_actual)) && (\"EST\" %in% names(df_actual))) {\n        df_actual &lt;- df_actual %&gt;% rename(est = EST) \n        cat(paste(\"   * AVISO: Columna 'EST' renombrada a 'est' en\", nombre_df, \"\\n\"))\n      } \n      \n      # Corrección: Variable de Ingreso (ingocup / INGOCUP)\n      if (!(\"ingocup\" %in% names(df_actual))) {\n        if (\"inglab\" %in% names(df_actual)) {\n          df_actual &lt;- df_actual %&gt;% rename(ingocup = inglab)\n        } else if (\"INGOCUP\" %in% names(df_actual)) {\n          df_actual &lt;- df_actual %&gt;% rename(ingocup = INGOCUP)\n        } \n      } \n      \n      # Corrección: Factor de Ponderación (FAC / FAC_TRI) a minúsculas\n      if (!(peso_actual_str %in% names(df_actual)) && (peso_antiguo_str %in% names(df_actual))) {\n        # Usamos := y !!sym() para renombrar la variable de texto\n        df_actual &lt;- df_actual %&gt;% rename(!!sym(peso_actual_str) := !!sym(peso_antiguo_str))\n      }\n      # =======================================================\n    \n      # A. Filtrado y Preparación\n      df_filt &lt;- df_actual %&gt;%\n        filter(ingocup &gt; 0, !is.na(ingocup)) \n      \n      # B. Diseño Muestral y Ponderación\n      formula_peso &lt;- as.formula(paste0(\"~\", peso_actual_str))\n      \n      diseno_actual &lt;- svydesign(\n        ids = ~upm, \n        strata = ~est, # Ahora 'est' existe\n        data = df_filt, \n        weights = formula_peso,\n        nest = TRUE ##Para muestras con un solo estrato\n      )\n      \n      # C. Cálculo de Media e IC\n      media_ponderada &lt;- svymean(~ingocup, diseno_actual, na.rm = TRUE)\n      ic_95 &lt;- confint(media_ponderada)\n      \n      # D. Almacenar resultados\n      tabla_temp &lt;- data.frame(\n        Año = año,\n        Trimestre = trimestre,\n        Media = as.numeric(media_ponderada[1]),\n        IC_Inferior = as.numeric(ic_95[1]),\n        IC_Superior = as.numeric(ic_95[2])\n      )\n      \n      # E. Consolidar\n      serie_ingreso_total &lt;- bind_rows(serie_ingreso_total, tabla_temp) #Apila los resultados\n      \n      cat(paste(\"✅ Éxito:\", nombre_df, \"procesado usando peso:\", peso_actual_str, \"\\n\"))\n      \n    }, error = function(e) {\n      cat(paste(\"⚠️ Omitido:\", nombre_df, \"– Error:\", conditionMessage(e), \"\\n\"))\n    })\n    \n  }\n}\n\n✅ Éxito: Enoe_2015_T1 procesado usando peso: fac \n✅ Éxito: Enoe_2015_T2 procesado usando peso: fac \n✅ Éxito: Enoe_2015_T3 procesado usando peso: fac \n✅ Éxito: Enoe_2015_T4 procesado usando peso: fac \n✅ Éxito: Enoe_2016_T1 procesado usando peso: fac \n✅ Éxito: Enoe_2016_T2 procesado usando peso: fac \n✅ Éxito: Enoe_2016_T3 procesado usando peso: fac \n✅ Éxito: Enoe_2016_T4 procesado usando peso: fac \n✅ Éxito: Enoe_2017_T1 procesado usando peso: fac \n✅ Éxito: Enoe_2017_T2 procesado usando peso: fac \n✅ Éxito: Enoe_2017_T3 procesado usando peso: fac \n✅ Éxito: Enoe_2017_T4 procesado usando peso: fac \n✅ Éxito: Enoe_2018_T1 procesado usando peso: fac \n✅ Éxito: Enoe_2018_T2 procesado usando peso: fac \n✅ Éxito: Enoe_2018_T3 procesado usando peso: fac \n✅ Éxito: Enoe_2018_T4 procesado usando peso: fac \n✅ Éxito: Enoe_2019_T1 procesado usando peso: fac \n✅ Éxito: Enoe_2019_T2 procesado usando peso: fac \n   * AVISO: Columna 'EST' renombrada a 'est' en Enoe_2019_T3 \n✅ Éxito: Enoe_2019_T3 procesado usando peso: fac \n   * AVISO: Columna 'EST' renombrada a 'est' en Enoe_2019_T4 \n✅ Éxito: Enoe_2019_T4 procesado usando peso: fac \n✅ Éxito: Enoe_2020_T1 procesado usando peso: fac \n⚠️ Omitido: Enoe_2020_T2 – Error: objeto 'Enoe_2020_T2' no encontrado \n✅ Éxito: Enoe_2020_T3 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2020_T4 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2021_T1 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2021_T2 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2021_T3 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2021_T4 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2022_T1 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2022_T2 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2022_T3 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2022_T4 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2023_T1 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2023_T2 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2023_T3 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2023_T4 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2024_T1 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2024_T2 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2024_T3 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2024_T4 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2025_T1 procesado usando peso: fac_tri \n✅ Éxito: Enoe_2025_T2 procesado usando peso: fac_tri \n⚠️ Omitido: Enoe_2025_T3 – Error: objeto 'Enoe_2025_T3' no encontrado \n⚠️ Omitido: Enoe_2025_T4 – Error: objeto 'Enoe_2025_T4' no encontrado \n\nserie_ingreso_total\n\n    Año Trimestre     Media IC_Inferior IC_Superior\n1  2015         1  5244.229    5179.958    5308.500\n2  2015         2  5282.406    5211.691    5353.121\n3  2015         3  5404.859    5319.517    5490.202\n4  2015         4  5375.187    5295.195    5455.178\n5  2016         1  5483.318    5412.380    5554.256\n6  2016         2  5527.432    5446.271    5608.593\n7  2016         3  5621.110    5534.157    5708.062\n8  2016         4  5659.809    5585.124    5734.494\n9  2017         1  5766.061    5698.463    5833.659\n10 2017         2  5821.228    5748.470    5893.986\n11 2017         3  5836.968    5762.706    5911.230\n12 2017         4  5862.350    5793.351    5931.349\n13 2018         1  6036.973    5961.802    6112.143\n14 2018         2  6118.144    6043.262    6193.026\n15 2018         3  6149.726    6071.686    6227.766\n16 2018         4  6188.929    6114.583    6263.275\n17 2019         1  6313.772    6244.581    6382.962\n18 2019         2  6352.562    6280.693    6424.430\n19 2019         3  6400.166    6330.194    6470.138\n20 2019         4  6542.009    6468.949    6615.069\n21 2020         1  6824.549    6742.125    6906.973\n22 2020         3  6758.452    6647.461    6869.442\n23 2020         4  6883.805    6783.932    6983.679\n24 2021         1  7129.192    7026.347    7232.038\n25 2021         2  7178.877    7069.607    7288.146\n26 2021         3  7394.624    7273.187    7516.060\n27 2021         4  7390.662    7296.842    7484.481\n28 2022         1  7666.625    7572.763    7760.487\n29 2022         2  7795.795    7700.024    7891.567\n30 2022         3  7841.819    7755.248    7928.390\n31 2022         4  8018.257    7927.119    8109.394\n32 2023         1  8425.237    8329.190    8521.283\n33 2023         2  8592.474    8488.112    8696.835\n34 2023         3  8787.320    8684.732    8889.909\n35 2023         4  8882.002    8773.506    8990.499\n36 2024         1  9323.537    9210.346    9436.727\n37 2024         2  9507.358    9374.830    9639.886\n38 2024         3  9716.547    9535.681    9897.412\n39 2024         4  9812.097    9679.125    9945.068\n40 2025         1 10132.974    9974.131   10291.816\n41 2025         2 10221.150   10088.949   10353.351\n\n\n\nCreamos una columna para la fecha y para la etiqueta de las medias ponderadas.\n      \n\nserie_ENOE15_25&lt;-serie_ingreso_total%&gt;%\n  mutate(\n    Fecha=as.Date(paste(Año, Trimestre *3-2, 1, sep = \"-\"), format=\"%Y-%m-%d\"), #Establecemos el formato fecha para las series de tiempo\n    Etiqueta_Media = format(round(Media, 2), big.mark = \",\", decimal.mark = \".\", scientific = FALSE) #Creamos una etiqueta para visualizarla en la serie\n  ) %&gt;%\n  arrange(Fecha)\nserie_ENOE15_25\n\n    Año Trimestre     Media IC_Inferior IC_Superior      Fecha Etiqueta_Media\n1  2015         1  5244.229    5179.958    5308.500 2015-01-01       5,244.23\n2  2015         2  5282.406    5211.691    5353.121 2015-04-01       5,282.41\n3  2015         3  5404.859    5319.517    5490.202 2015-07-01       5,404.86\n4  2015         4  5375.187    5295.195    5455.178 2015-10-01       5,375.19\n5  2016         1  5483.318    5412.380    5554.256 2016-01-01       5,483.32\n6  2016         2  5527.432    5446.271    5608.593 2016-04-01       5,527.43\n7  2016         3  5621.110    5534.157    5708.062 2016-07-01       5,621.11\n8  2016         4  5659.809    5585.124    5734.494 2016-10-01       5,659.81\n9  2017         1  5766.061    5698.463    5833.659 2017-01-01       5,766.06\n10 2017         2  5821.228    5748.470    5893.986 2017-04-01       5,821.23\n11 2017         3  5836.968    5762.706    5911.230 2017-07-01       5,836.97\n12 2017         4  5862.350    5793.351    5931.349 2017-10-01       5,862.35\n13 2018         1  6036.973    5961.802    6112.143 2018-01-01       6,036.97\n14 2018         2  6118.144    6043.262    6193.026 2018-04-01       6,118.14\n15 2018         3  6149.726    6071.686    6227.766 2018-07-01       6,149.73\n16 2018         4  6188.929    6114.583    6263.275 2018-10-01       6,188.93\n17 2019         1  6313.772    6244.581    6382.962 2019-01-01       6,313.77\n18 2019         2  6352.562    6280.693    6424.430 2019-04-01       6,352.56\n19 2019         3  6400.166    6330.194    6470.138 2019-07-01       6,400.17\n20 2019         4  6542.009    6468.949    6615.069 2019-10-01       6,542.01\n21 2020         1  6824.549    6742.125    6906.973 2020-01-01       6,824.55\n22 2020         3  6758.452    6647.461    6869.442 2020-07-01       6,758.45\n23 2020         4  6883.805    6783.932    6983.679 2020-10-01       6,883.81\n24 2021         1  7129.192    7026.347    7232.038 2021-01-01       7,129.19\n25 2021         2  7178.877    7069.607    7288.146 2021-04-01       7,178.88\n26 2021         3  7394.624    7273.187    7516.060 2021-07-01       7,394.62\n27 2021         4  7390.662    7296.842    7484.481 2021-10-01       7,390.66\n28 2022         1  7666.625    7572.763    7760.487 2022-01-01       7,666.63\n29 2022         2  7795.795    7700.024    7891.567 2022-04-01       7,795.80\n30 2022         3  7841.819    7755.248    7928.390 2022-07-01       7,841.82\n31 2022         4  8018.257    7927.119    8109.394 2022-10-01       8,018.26\n32 2023         1  8425.237    8329.190    8521.283 2023-01-01       8,425.24\n33 2023         2  8592.474    8488.112    8696.835 2023-04-01       8,592.47\n34 2023         3  8787.320    8684.732    8889.909 2023-07-01       8,787.32\n35 2023         4  8882.002    8773.506    8990.499 2023-10-01       8,882.00\n36 2024         1  9323.537    9210.346    9436.727 2024-01-01       9,323.54\n37 2024         2  9507.358    9374.830    9639.886 2024-04-01       9,507.36\n38 2024         3  9716.547    9535.681    9897.412 2024-07-01       9,716.55\n39 2024         4  9812.097    9679.125    9945.068 2024-10-01       9,812.10\n40 2025         1 10132.974    9974.131   10291.816 2025-01-01      10,132.97\n41 2025         2 10221.150   10088.949   10353.351 2025-04-01      10,221.15\n\n\n\n  Graficamos en una serie de tiempo el ingreso ponderado con los intervalos de confianza.\n\n\nserie_tiempo_enoe&lt;-ggplot(serie_ENOE15_25, aes(x=Fecha,  y= Media))+\n  geom_ribbon(\n    aes(ymin= IC_Inferior, ymax=IC_Superior), #Nos muestra los intervalos de confianza\n    fill=\"#0072B2\",\n    alpha = 0.2,\n  )+\n  geom_line(color=\"#0072B2\", size = 1) +\n  geom_text(\n    # Muestra la etiqueta solo si es el primer trimestre del año (o el único visible)\n    data = subset(serie_ENOE15_25, Trimestre == 1 | Fecha == max(Fecha)), \n    aes(label = Etiqueta_Media),\n    vjust = -1, # Posiciona la etiqueta ligeramente por encima del punto\n    size = 3.5,\n    color = \"black\"\n  ) +\n  \n  # D. Ajustar el Eje X para mostrar los extremos\n  scale_x_date(\n    breaks = \"1 year\", # Marcas principales cada año\n    date_labels = \"%Y\", # Formato de la etiqueta: solo el año (ej. 2015)\n    limits = as.Date(c(\"2014-12-01\", \"2026-03-01\")) # **LÍMITES AMPLIADOS**\n  ) +\n  labs(\n    title = \"Ingreso Laboral Promedio en México (2015-2025)\",\n    subtitle = \"Media con Intervalo de Confianza del 95%\",\n    x = \"Año(Trimestre)\",\n    y = \"Ingreso Promedio Ponderado (MXN)\",\n    caption = \"Fuente: Elaboración propia a partir de INEGI ENOE 2015 al 2025\"\n  ) +\n  theme_minimal() +\n  scale_y_continuous(labels = scales::comma) # Formato de miles para el eje Y\nserie_tiempo_enoe\n\n\n\n\n\n\n\n\n\n  Ahora calculamos la tasa de variación trimestral y la tasa anual.\n \n\n#Tasa trimestral\ntasa_inc_ENOE&lt;-serie_ENOE15_25%&gt;%\n  arrange(Fecha)%&gt;% # Asegurarse de que esté ordenada cronológicamente\n  mutate(\n    Media_Anterior = lag(Media, n = 1),\n    \n    # 2. Calcular la Tasa de Variación Trimestral (TVT)\n    Tasa_Trimestral = ((Media - Media_Anterior) / Media_Anterior) * 100,\n    \n    # Formato para la visualización\n    Tasa_Trimestral_Etiqueta = paste0(round(Tasa_Trimestral, 2), \"%\")\n  )\n#Calculamos la tasa de variación anual\ntasa_inc_ENOE&lt;-tasa_inc_ENOE%&gt;%\n  mutate(\n    # 1. Obtener la media del mismo trimestre del año anterior (t-4)\n    Media_Anual_Anterior = lag(Media, n = 4),\n    \n    # 2. Calcular la Tasa de Variación Anual (TVA)\n    Tasa_Anual = ((Media - Media_Anual_Anterior) / Media_Anual_Anterior) * 100,\n    \n    # Formato para la visualización\n    Tasa_Anual_Etiqueta = paste0(round(Tasa_Anual, 2), \"%\")\n  )\n\ntasa_inc_ENOE\n\n    Año Trimestre     Media IC_Inferior IC_Superior      Fecha Etiqueta_Media\n1  2015         1  5244.229    5179.958    5308.500 2015-01-01       5,244.23\n2  2015         2  5282.406    5211.691    5353.121 2015-04-01       5,282.41\n3  2015         3  5404.859    5319.517    5490.202 2015-07-01       5,404.86\n4  2015         4  5375.187    5295.195    5455.178 2015-10-01       5,375.19\n5  2016         1  5483.318    5412.380    5554.256 2016-01-01       5,483.32\n6  2016         2  5527.432    5446.271    5608.593 2016-04-01       5,527.43\n7  2016         3  5621.110    5534.157    5708.062 2016-07-01       5,621.11\n8  2016         4  5659.809    5585.124    5734.494 2016-10-01       5,659.81\n9  2017         1  5766.061    5698.463    5833.659 2017-01-01       5,766.06\n10 2017         2  5821.228    5748.470    5893.986 2017-04-01       5,821.23\n11 2017         3  5836.968    5762.706    5911.230 2017-07-01       5,836.97\n12 2017         4  5862.350    5793.351    5931.349 2017-10-01       5,862.35\n13 2018         1  6036.973    5961.802    6112.143 2018-01-01       6,036.97\n14 2018         2  6118.144    6043.262    6193.026 2018-04-01       6,118.14\n15 2018         3  6149.726    6071.686    6227.766 2018-07-01       6,149.73\n16 2018         4  6188.929    6114.583    6263.275 2018-10-01       6,188.93\n17 2019         1  6313.772    6244.581    6382.962 2019-01-01       6,313.77\n18 2019         2  6352.562    6280.693    6424.430 2019-04-01       6,352.56\n19 2019         3  6400.166    6330.194    6470.138 2019-07-01       6,400.17\n20 2019         4  6542.009    6468.949    6615.069 2019-10-01       6,542.01\n21 2020         1  6824.549    6742.125    6906.973 2020-01-01       6,824.55\n22 2020         3  6758.452    6647.461    6869.442 2020-07-01       6,758.45\n23 2020         4  6883.805    6783.932    6983.679 2020-10-01       6,883.81\n24 2021         1  7129.192    7026.347    7232.038 2021-01-01       7,129.19\n25 2021         2  7178.877    7069.607    7288.146 2021-04-01       7,178.88\n26 2021         3  7394.624    7273.187    7516.060 2021-07-01       7,394.62\n27 2021         4  7390.662    7296.842    7484.481 2021-10-01       7,390.66\n28 2022         1  7666.625    7572.763    7760.487 2022-01-01       7,666.63\n29 2022         2  7795.795    7700.024    7891.567 2022-04-01       7,795.80\n30 2022         3  7841.819    7755.248    7928.390 2022-07-01       7,841.82\n31 2022         4  8018.257    7927.119    8109.394 2022-10-01       8,018.26\n32 2023         1  8425.237    8329.190    8521.283 2023-01-01       8,425.24\n33 2023         2  8592.474    8488.112    8696.835 2023-04-01       8,592.47\n34 2023         3  8787.320    8684.732    8889.909 2023-07-01       8,787.32\n35 2023         4  8882.002    8773.506    8990.499 2023-10-01       8,882.00\n36 2024         1  9323.537    9210.346    9436.727 2024-01-01       9,323.54\n37 2024         2  9507.358    9374.830    9639.886 2024-04-01       9,507.36\n38 2024         3  9716.547    9535.681    9897.412 2024-07-01       9,716.55\n39 2024         4  9812.097    9679.125    9945.068 2024-10-01       9,812.10\n40 2025         1 10132.974    9974.131   10291.816 2025-01-01      10,132.97\n41 2025         2 10221.150   10088.949   10353.351 2025-04-01      10,221.15\n   Media_Anterior Tasa_Trimestral Tasa_Trimestral_Etiqueta Media_Anual_Anterior\n1              NA              NA                      NA%                   NA\n2        5244.229      0.72798470                    0.73%                   NA\n3        5282.406      2.31812899                    2.32%                   NA\n4        5404.859     -0.54900383                   -0.55%                   NA\n5        5375.187      2.01168662                    2.01%             5244.229\n6        5483.318      0.80450744                     0.8%             5282.406\n7        5527.432      1.69477244                    1.69%             5404.859\n8        5621.110      0.68847452                    0.69%             5375.187\n9        5659.809      1.87729552                    1.88%             5483.318\n10       5766.061      0.95675689                    0.96%             5527.432\n11       5821.228      0.27039375                    0.27%             5621.110\n12       5836.968      0.43484723                    0.43%             5659.809\n13       5862.350      2.97871343                    2.98%             5766.061\n14       6036.973      1.34456378                    1.34%             5821.228\n15       6118.144      0.51620660                    0.52%             5836.968\n16       6149.726      0.63747724                    0.64%             5862.350\n17       6188.929      2.01719141                    2.02%             6036.973\n18       6313.772      0.61437370                    0.61%             6118.144\n19       6352.562      0.74936959                    0.75%             6149.726\n20       6400.166      2.21623483                    2.22%             6188.929\n21       6542.009      4.31886613                    4.32%             6313.772\n22       6824.549     -0.96852510                   -0.97%             6352.562\n23       6758.452      1.85476715                    1.85%             6400.166\n24       6883.805      3.56470081                    3.56%             6542.009\n25       7129.192      0.69691346                     0.7%             6824.549\n26       7178.877      3.00530146                    3.01%             6758.452\n27       7394.624     -0.05357744                   -0.05%             6883.805\n28       7390.662      3.73394787                    3.73%             7129.192\n29       7666.625      1.68483516                    1.68%             7178.877\n30       7795.795      0.59036636                    0.59%             7394.624\n31       7841.819      2.24995811                    2.25%             7390.662\n32       8018.257      5.07566913                    5.08%             7666.625\n33       8425.237      1.98495184                    1.98%             7795.795\n34       8592.474      2.26764272                    2.27%             7841.819\n35       8787.320      1.07748697                    1.08%             8018.257\n36       8882.002      4.97111306                    4.97%             8425.237\n37       9323.537      1.97158388                    1.97%             8592.474\n38       9507.358      2.20027956                     2.2%             8787.320\n39       9716.547      0.98337705                    0.98%             8882.002\n40       9812.097      3.27021688                    3.27%             9323.537\n41      10132.974      0.87019183                    0.87%             9507.358\n   Tasa_Anual Tasa_Anual_Etiqueta\n1          NA                 NA%\n2          NA                 NA%\n3          NA                 NA%\n4          NA                 NA%\n5    4.559091               4.56%\n6    4.638525               4.64%\n7    4.001031                  4%\n8    5.295126                5.3%\n9    5.156410               5.16%\n10   5.315232               5.32%\n11   3.840144               3.84%\n12   3.578577               3.58%\n13   4.698388                4.7%\n14   5.100568                5.1%\n15   5.358222               5.36%\n16   5.570785               5.57%\n17   4.585061               4.59%\n18   3.831523               3.83%\n19   4.072376               4.07%\n20   5.705019               5.71%\n21   8.089897               8.09%\n22   6.389391               6.39%\n23   7.556669               7.56%\n24   8.975588               8.98%\n25   5.191954               5.19%\n26   9.412981               9.41%\n27   7.363026               7.36%\n28   7.538481               7.54%\n29   8.593524               8.59%\n30   6.047574               6.05%\n31   8.491727               8.49%\n32   9.894987               9.89%\n33  10.219335              10.22%\n34  12.057168              12.06%\n35  10.772241              10.77%\n36  10.662016              10.66%\n37  10.647511              10.65%\n38  10.574628              10.57%\n39  10.471676              10.47%\n40   8.681651               8.68%\n41   7.507784               7.51%\n\n\n\n  Finalmente graficamos la tasa de crecimiento anual.\n\n\nggplot(tasa_inc_ENOE, aes(x = Fecha, y = Tasa_Anual)) +\n  \n  # 1. Sombreado de área bajo/sobre cero (opcional, pero impactante)\n  # geom_area(aes(y = ifelse(Tasa_Anual &gt; 0, Tasa_Anual, 0)), fill = \"#3D9970\", alpha = 0.1) + # Crecimiento (verde sutil)\n  # geom_area(aes(y = ifelse(Tasa_Anual &lt; 0, Tasa_Anual, 0)), fill = \"#FF4136\", alpha = 0.1) + # Caída (rojo sutil)\n  \n  # 2. Línea Principal: color profesional y grosor adecuado\n  geom_line(color = \"#0072B2\", linewidth = 1.2) + # Azul oscuro (color profesional)\n  \n  # 3. Línea de Cero: más prominente\n  geom_hline(yintercept = 0, color = \"black\", linetype = \"solid\", linewidth = 0.5) +\n  \n  # 4. Etiquetas Estratégicas (Máximo, Mínimo y Último Valor)\n  # Creamos un dataframe para etiquetas clave\n  geom_text(\n    # Filtro que combina la lógica profesional con el requisito de etiquetar TODOS los Q4\n    data = . %&gt;% filter(Trimestre == 4 | # &lt;--- Agregamos este filtro\n                          Tasa_Anual == max(Tasa_Anual, na.rm = TRUE) | \n                          Tasa_Anual == min(Tasa_Anual, na.rm = TRUE) | \n                          Fecha == max(Fecha)),\n    \n    # Mapeo de estéticas\n    aes(label = Tasa_Anual_Etiqueta, \n        vjust = ifelse(Tasa_Anual &gt; 0, -1.2, 1.5)), \n    \n    size = 4,\n    fontface = \"bold\", \n    color = \"#0072B2\"\n  )+\n  \n  # 5. Ejes y Escalas\n  scale_y_continuous(\n    labels = function(x) paste0(x, \"%\"),\n    breaks = scales::pretty_breaks(n = 8) # Control de número de ticks\n  ) +\n  scale_x_date(\n    # Establece las marcas de división principales cada 1 año\n    date_breaks = \"1 year\",\n    # Formatea la etiqueta solo para mostrar el año (ej. 2017)\n    date_labels = \"%Y\"\n  ) +\n  \n  # 6. Títulos y Notas de Fuente\n  labs(\n    title = \"Tasa de Crecimiento Anual del Ingreso Laboral Ponderado\",\n    subtitle = \"Variación Interanual (T/T-4) - Periodo [Año 2015 - Año 2025]\",\n    x = NULL, # Eliminar etiqueta redundante en el eje X\n    y = \"Tasa de Crecimiento (%)\",\n    caption = \"Fuente: INEGI (ENOE), cálculos propios. Notas: [Tasa Anual comparativa T4].\"\n  ) +\n  \n  # 7. Tema Profesional y Limpio\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 16, face = \"bold\", hjust = 0), # Título fuerte y alineado a la izquierda\n    plot.subtitle = element_text(size = 12, color = \"gray30\", hjust = 0),\n    plot.caption = element_text(size = 9, color = \"gray50\", hjust = 0), # Fuente en la esquina inferior izquierda\n    axis.title.y = element_text(size = 11, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1, size = 10), # Rotar etiquetas X si el espacio es limitado\n    panel.grid.major.x = element_blank(), # Eliminar líneas de cuadrícula verticales\n    panel.grid.minor = element_blank() # Eliminar líneas secundarias\n  )"
  },
  {
    "objectID": "proyectos/Mapa Wifi/Data/Wifi Acceso/Alcaldías/poligonos_alcaldias_cdmx.html",
    "href": "proyectos/Mapa Wifi/Data/Wifi Acceso/Alcaldías/poligonos_alcaldias_cdmx.html",
    "title": "",
    "section": "",
    "text": "&lt;!DOCTYPE qgis PUBLIC ‘http://mrcc.com/qgis.dtd’ ‘SYSTEM’&gt;     dataset\n\n\n      PROJCRS[“MEXICO_ITRF_2008_LCC”,BASEGEOGCRS[“MEXICO_ITRF_2008”,DATUM[“International Terrestrial Reference Frame 2008”,ELLIPSOID[“GRS 1980”,6378137,298.257222101,LENGTHUNIT[“metre”,1]],ID[“EPSG”,1061]],PRIMEM[“Greenwich”,0,ANGLEUNIT[“Degree”,0.0174532925199433]]],CONVERSION[“unnamed”,METHOD[“Lambert Conic Conformal (2SP)”,ID[“EPSG”,9802]],PARAMETER[“Latitude of false origin”,12,ANGLEUNIT[“Degree”,0.0174532925199433],ID[“EPSG”,8821]],PARAMETER[“Longitude of false origin”,-102,ANGLEUNIT[“Degree”,0.0174532925199433],ID[“EPSG”,8822]],PARAMETER[“Latitude of 1st standard parallel”,17.5,ANGLEUNIT[“Degree”,0.0174532925199433],ID[“EPSG”,8823]],PARAMETER[“Latitude of 2nd standard parallel”,29.5,ANGLEUNIT[“Degree”,0.0174532925199433],ID[“EPSG”,8824]],PARAMETER[“Easting at false origin”,2500000,LENGTHUNIT[“metre”,1],ID[“EPSG”,8826]],PARAMETER[“Northing at false origin”,0,LENGTHUNIT[“metre”,1],ID[“EPSG”,8827]]],CS[Cartesian,2],AXIS[“(E)”,east,ORDER[1],LENGTHUNIT[“metre”,1,ID[“EPSG”,9001]]],AXIS[“(N)”,north,ORDER[2],LENGTHUNIT[“metre”,1,ID[“EPSG”,9001]]]] +proj=lcc +lat_0=12 +lon_0=-102 +lat_1=17.5 +lat_2=29.5 +x_0=2500000 +y_0=0 +ellps=GRS80 +units=m +no_defs +type=crs 0 0  MEXICO_ITRF_2008_LCC  PARAMETER:6378137:6356752.31414035614579916 false"
  }
]